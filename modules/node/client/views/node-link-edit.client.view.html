<div class="wrapper wrapper-content animated fadeInRight" data-ng-init="init()">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <div class="form-group">
                <label for="description">Description</label>
                <input type="text" id="description" name="description" class="form-control" ng-model="link.description"
                       placeholder="Description of Output" required/>
            </div>

            <div class="form-group">
                <label for="outputLink">Output</label>

                <select id="outputLink" data-ng-model="link.outputId"  class="form-control">
                    <option data-ng-repeat="output in outputs track by $index" value="{{output.id}}" data-ng-selected="output.id === link.outputId" required>{{output.name}}</option>
                </select>
            </div>

            <div class="form-group">
                <label for="inputLink">Input</label>

                <select id="inputLink" data-ng-model="link.inputId" class="form-control">
                    <option data-ng-repeat="input in inputs track by $index" value="{{input.id}}" data-ng-selected="input.id === link.inputId" required>{{input.name}}</option>
                </select>
            </div>

            <div class="form-group">
                <label for="inputLink">Pipes</label>

                <table class="table table-striped table-bordered table-hover prepend-bottom-10">
                    <tr>
                        <td class="text-center">
                            <strong>Name</strong>
                        </td>

                        <td class="text-center">
                            <strong>Description</strong>
                        </td>

                        <td class="text-center">
                            <strong>User Input</strong>
                        </td>

                        <td class="text-center"></td>
                    </tr>

                    <tr data-ng-repeat="pipe in link.pipes track by $index">
                        <td>{{pipe.name}}</td>
                        <td>{{pipe.description}}</td>

                        <td class="text-center"  data-ng-if="pipe.userInType"
                            data-ng-init="valType = pipe.userInType.toLowerCase(); setVal = (valType === 'boolean') ? false : (valType === 'number') ? 0 : (valType === 'string') ? '' : undefined">
                            <div class="row form-group text-center" style="margin-left: 1%; margin-right: 1%">
                                <input data-ng-model="pipe.data" class="form-control"
                                       type="{{(valType === 'boolean') ? 'checkbox' : (valType === 'number') ? 'number' : (valType === 'string') ? 'text' : ''}}"></input>
                            </div>
                        </td>

                        <td class="text-center"  data-ng-if="!pipe.userInType">
                            No Input Needed
                        </td>

                        <td>
                            <button class="btn btn-danger" ng-click="removePipe(pipe.pipeId)">
                                <i class="fa fa-trash-o"></i>
                            </button>
                        </td>

                        <td>
                            <div class="input-group-btn-vertical">
                                <button class="btn btn-default" type="button" ng-click="pipeUp($index)">
                                    <i class="fa fa-caret-up"></i>
                                </button>

                                <button class="btn btn-default" type="button" ng-click="pipeDown($index)">
                                    <i class="fa fa-caret-down"></i>
                                </button>
                            </div>
                        </td>
                    </tr>

                    <tr data-ng-if="!link.pipes.length">
                        <td colspan="3">No pipes for this link</td>
                    </tr>
                </table>

                <select id="inputLink" data-ng-model="selectedPipe" class="prepend-bottom-10 form-control">
                    <option data-ng-repeat="pipe in pipes track by $index" value="{{pipe.id}}" required>{{pipe.name}} - {{pipe.description}}</option>
                </select>

                <div class="row" style="margin-top: 10px;">
                    <button class="btn btn-info"
                            ng-click="addPipe(selectedPipe)">Add Pipe</button>
                </div>
            </div>

            <div class="form-group">
                <div data-ng-click="update(link)" class="btn btn-primary">Update</div>
            </div>
        </div>
    </div>
</div>
